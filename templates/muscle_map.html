{% extends "base.html" %}
{% block title %}Mapa muscular | MuscleGain{% endblock %}

{% block content %}
<div class="dashboard">
  <aside class="sidebar">
    <div class="sidebar-logo">MUSCLE<span class="gain">GAIN</span></div>
    <nav class="sidebar-menu">
      <a href="{{ url_for('dashboard') }}">Inicio</a>
      <a href="{{ url_for('register_session') }}">Registro</a>
      <a href="{{ url_for('routines') }}">Rutinas</a>
      <a href="{{ url_for('progress') }}">Progreso</a>
      <a class="active" href="{{ url_for('muscle_map') }}">Músculos</a>
      {% if is_admin %}
        <a href="{{ url_for('admin_muscle_map') }}">Admin mapa</a>
      {% endif %}
    </nav>
    <div class="sidebar-spacer"></div>
    <a class="sidebar-logout" href="{{ url_for('logout') }}">Cerrar sesion</a>
  </aside>

  <main class="dashboard-main">
    <section class="topbar">
      <div>
        <div class="page-kicker">Músculos</div>
        <h1 class="page-title">Selecciona un musculo</h1>
        <p class="page-subtitle">Elige vista frontal o posterior para mas precision.</p>
      </div>
    </section>

    <section class="panel map-shell">
      <div class="map-canvas">
        <div class="map-tabs" role="tablist" aria-label="Vista del cuerpo">
          <button class="map-tab active" type="button" data-view="front" role="tab" aria-selected="true">Frontal</button>
          <button class="map-tab" type="button" data-view="back" role="tab" aria-selected="false">Posterior</button>
        </div>

        <div class="muscle-view active" data-view="front" role="tabpanel">
          <div class="muscle-image-wrap split" id="muscleMapFront">
            <img class="muscle-image split front" src="{{ url_for('static', filename='images/cuerpo.jpg') }}" alt="Mapa muscular frontal" />
            <button class="muscle-hotspot" data-muscle="pectorales" style="left:26%;top:18%;width:20%;height:12%;"></button>
            <button class="muscle-hotspot" data-muscle="pectorales" style="left:54%;top:18%;width:20%;height:12%;"></button>
            <button class="muscle-hotspot" data-muscle="hombros" style="left:12%;top:14%;width:16%;height:10%;"></button>
            <button class="muscle-hotspot" data-muscle="hombros" style="left:72%;top:14%;width:16%;height:10%;"></button>
            <button class="muscle-hotspot" data-muscle="biceps" style="left:8%;top:24%;width:14%;height:14%;"></button>
            <button class="muscle-hotspot" data-muscle="biceps" style="left:78%;top:24%;width:14%;height:14%;"></button>
            <button class="muscle-hotspot" data-muscle="antebrazos" style="left:6%;top:36%;width:14%;height:12%;"></button>
            <button class="muscle-hotspot" data-muscle="antebrazos" style="left:80%;top:36%;width:14%;height:12%;"></button>
            <button class="muscle-hotspot" data-muscle="abdomen" style="left:32%;top:28%;width:36%;height:20%;"></button>
            <button class="muscle-hotspot" data-muscle="cuadriceps" style="left:30%;top:50%;width:20%;height:20%;"></button>
            <button class="muscle-hotspot" data-muscle="cuadriceps" style="left:50%;top:50%;width:20%;height:20%;"></button>
            <button class="muscle-hotspot" data-muscle="pantorrillas" style="left:32%;top:74%;width:18%;height:18%;"></button>
            <button class="muscle-hotspot" data-muscle="pantorrillas" style="left:50%;top:74%;width:18%;height:18%;"></button>
          </div>
        </div>

        <div class="muscle-view" data-view="back" role="tabpanel">
          <div class="muscle-image-wrap split" id="muscleMapBack">
            <img class="muscle-image split back" src="{{ url_for('static', filename='images/cuerpo.jpg') }}" alt="Mapa muscular posterior" />
            <button class="muscle-hotspot" data-muscle="trapecios" style="left:36%;top:12%;width:28%;height:10%;"></button>
            <button class="muscle-hotspot" data-muscle="espalda" style="left:28%;top:20%;width:44%;height:24%;"></button>
            <button class="muscle-hotspot" data-muscle="triceps" style="left:10%;top:24%;width:14%;height:14%;"></button>
            <button class="muscle-hotspot" data-muscle="triceps" style="left:76%;top:24%;width:14%;height:14%;"></button>
            <button class="muscle-hotspot" data-muscle="gluteos" style="left:34%;top:46%;width:32%;height:12%;"></button>
            <button class="muscle-hotspot" data-muscle="isquios" style="left:32%;top:58%;width:36%;height:16%;"></button>
            <button class="muscle-hotspot" data-muscle="pantorrillas" style="left:32%;top:74%;width:18%;height:18%;"></button>
            <button class="muscle-hotspot" data-muscle="pantorrillas" style="left:50%;top:74%;width:18%;height:18%;"></button>
          </div>
        </div>
      </div>

      <div class="muscle-info" id="muscleInfo">
        <div class="section-title">Tierlist del musculo</div>
        <div class="muscle-name" id="muscleName">Selecciona un musculo</div>
        <div class="muscle-overview" id="muscleOverview">Tip: haz click en cualquier zona marcada.</div>
        <div class="muscle-actions">
          <a class="dash-btn primary" id="addToWorkout" href="{{ url_for('register_session') }}">Anadir al entrenamiento</a>
          <a class="dash-btn secondary" id="addToRoutine" href="{{ url_for('routines') }}">Anadir a mi rutina</a>
        </div>
        <div class="tier-list" id="tierList"></div>
      </div>
    </section>
  </main>
</div>
{% endblock %}

{% block scripts %}
  <script>
    window.MUSCLES = {{ muscles|tojson }};
  </script>
  <script src="{{ url_for('static', filename='js/muscle_map.js') }}"></script>
{% endblock %}
