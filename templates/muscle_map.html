{% extends "base.html" %}
{% block title %}Mapa muscular | MuscleGain{% endblock %}

{% block content %}
<div class="dashboard">
  <aside class="sidebar">
    <div class="sidebar-logo">MUSCLE<span class="gain">GAIN</span></div>
    <nav class="sidebar-menu">
      <a href="{{ url_for('dashboard') }}">Inicio</a>
      <a href="{{ url_for('register_session') }}">Registro</a>
      <a href="{{ url_for('routines') }}">Rutinas</a>
      <a href="{{ url_for('progress') }}">Progreso</a>
      <a class="active" href="{{ url_for('muscle_map') }}">Músculos</a>
      {% if is_admin %}
        <a href="{{ url_for('admin_muscle_map') }}">Admin mapa</a>
      {% endif %}
    </nav>
    <div class="sidebar-spacer"></div>
    <a class="sidebar-logout" href="{{ url_for('logout') }}">Cerrar sesion</a>
  </aside>

  <main class="dashboard-main">
    <section class="topbar">
      <div>
        <div class="page-kicker">Músculos</div>
        <h1 class="page-title">Selecciona un musculo</h1>
        <p class="page-subtitle">Elige vista frontal o posterior.</p>
      </div>
    </section>

    <section class="panel map-shell">
      <div class="map-canvas">
        <div class="map-tabs" role="tablist" aria-label="Vista del cuerpo">
          <button class="map-tab active" type="button" data-view="front" role="tab" aria-selected="true">Frontal</button>
          <button class="map-tab" type="button" data-view="back" role="tab" aria-selected="false">Posterior</button>
        </div>

        <div class="muscle-view active" data-view="front" role="tabpanel">
          <div class="cuerpo-container">
            {% include "partials/muscle_front.html" %}
          </div>
        </div>

        <div class="muscle-view" data-view="back" role="tabpanel">
          <div class="cuerpo-container">
            {% include "partials/muscle_back.html" %}
          </div>
        </div>
      </div>

      <div class="muscle-info" id="muscleInfo">
        <div class="section-title">Detalle del musculo</div>
        <div class="muscle-name" id="muscleName">Selecciona un musculo</div>
        <div class="muscle-overview" id="muscleOverview">Selecciona una zona del cuerpo.</div>
        <div class="muscle-actions">
          <a class="dash-btn primary" id="addToWorkout" href="{{ url_for('register_session') }}">Anadir al entrenamiento</a>
          <a class="dash-btn secondary" id="addToRoutine" href="{{ url_for('routines') }}">Anadir a mi rutina</a>
        </div>
        <div class="tier-list" id="tierList"></div>
      </div>
    </section>
  </main>
</div>
{% endblock %}

{% block scripts %}
  <script>
    window.MUSCLES = {{ muscles|tojson }};
  </script>
  <script src="{{ url_for('static', filename='js/muscle_map.js') }}"></script>
{% endblock %}
